from fpga import api
import time
import numpy as np

class quickMafths(api): 
    def __init__(self, bitfile):
        # program bitfile
        super(quickMafths, self).__init__(bitfile)


if __name__ == '__main__':

    dev = quickMafths('Top.bit')

    # reset
    dev.wire_in(0x00, 1)
    time.sleep(0.1)

    # not reset
    dev.wire_in(0x00, 0)

    # prep input
    a = [0x0,0x0,0x0,0xf,0xf,0xf,0xf,0xf,0x0,0x0,0x0,0xe,0xe,0xe,0xe,0xe,0x0,0x0,0x0,0xd,0xd,0xd,0xd,0xd,0x0,0x0,0x0,0xc,0xc,0xc,0xc,0xc,0x0,0x0,0x0,0xb,0xb,0xb,0xb,0xb,0x0,0x0,0x0,0xa,0xa,0xa,0xa,0xa]
    b = bytearray(a)
    print("length: ", len(b))
    print("In: ", b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    dev.write(0x80, b)
    # while 1:
    #     val = dev.wire_out(0x01)
    #     print(val)
    # wait
    time.sleep(1)    

    # get output
    c = bytearray(528)
    # while(dev.wire_out(0x01) == 0):
    #     pass
    dev.read(0xA0, c)
    print("length: ", len(c))
    print("output: ", c)

    print("\n\n")





